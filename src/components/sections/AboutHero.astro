---
import PenguinWaving from '@/components/icons/PenguinWaving.astro';
import StarDecoration from '@/components/ui/StarDecoration.astro';
import CircleDecoration from '@/components/ui/CircleDecoration.astro';
import ScrollIndicator from '@/components/ui/ScrollIndicator.astro';

interface Props {
  title?: string;
  sectionLabel?: string;
}

const {
  title = "'Sup, I'm Tania Tello",
  sectionLabel = 'about me'
} = Astro.props;
---

<section
  id="about-hero"
  class="about-hero relative w-full min-h-screen overflow-hidden flex flex-col items-center justify-center"
  style="background-color: #FADCDE;"
>
  <CircleDecoration
    class="absolute -bottom-[100px] -left-[150px] lg:-bottom-[150px] lg:-left-[200px] !w-[450px] !h-[450px] lg:!w-[650px] lg:!h-[650px]"
    size="xl"
    color="cream"
    opacity={0.7}
  />
  <CircleDecoration
    class="absolute -bottom-24 -right-24 lg:-bottom-32 lg:-right-32"
    size="xl"
    color="cream"
    opacity={0.7}
  />
  <CircleDecoration
    class="absolute top-[35%] right-[12%] hidden lg:block"
    size="md"
    color="white"
    opacity={0.6}
  />

  <div class="absolute left-[15%] lg:left-[20%] top-[25%] lg:top-[30%]">
    <StarDecoration size="sm" color="pink" class="star-float absolute -top-8 left-4" />
    <StarDecoration size="lg" color="pink" class="star-float" />
    <StarDecoration size="md" color="pink" class="star-float-delay absolute top-6 left-10" />
    <StarDecoration size="md" color="pink" class="star-float absolute top-14 -left-2" />
    <StarDecoration size="sm" color="pink" class="star-float-delay absolute top-20 left-8" />
  </div>

  <div class="relative z-10 flex flex-col items-center pt-8 lg:pt-12 pb-32 w-full overflow-hidden">
    <h1
      class="hero-title text-brand-brown text-center whitespace-nowrap mb-16 lg:mb-24 translate-x-[40%] md:translate-x-[55%] lg:translate-x-[70%]"
      style="font-family: 'Stacion', serif; font-weight: 400; font-size: clamp(48px, 10vw, 120px); line-height: 25px; letter-spacing: 0px;"
    >
      {title}
    </h1>

    <div class="penguin-container">
      <PenguinWaving width={333} height={248} class="w-[280px] h-auto md:w-[333px]" />
    </div>
  </div>

  <div class="absolute bottom-28 left-1/2 -translate-x-1/2 z-10">
    <ScrollIndicator />
  </div>

  <div class="absolute bottom-0 left-0 overflow-hidden pointer-events-none">
    <span class="section-label text-[#F2C7CA] text-[5rem] md:text-[8rem] lg:text-[12rem] xl:text-[14rem] font-display font-bold leading-none select-none translate-y-[40%] block pl-4 lg:pl-8" aria-hidden="true">
      {sectionLabel}
    </span>
  </div>
</section>

<script>
  import gsap from 'gsap';
  import { ScrollTrigger } from 'gsap/ScrollTrigger';

  gsap.registerPlugin(ScrollTrigger);

  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  if (!prefersReducedMotion) {
    const tl = gsap.timeline({ defaults: { ease: 'power3.out' } });

    tl.from('.hero-title', {
      opacity: 0,
      y: 50,
      duration: 1,
      delay: 0.3
    })
    .from('.penguin-container', {
      opacity: 0,
      y: 30,
      scale: 0.9,
      duration: 0.8
    }, '-=0.5')
    .from('.scroll-indicator', {
      opacity: 0,
      y: 20,
      duration: 0.6
    }, '-=0.3')
    .from('.section-label', {
      opacity: 0,
      y: 100,
      duration: 1
    }, '-=0.5');

    gsap.to('.hero-title', {
      scrollTrigger: {
        trigger: '#about-hero',
        start: 'top top',
        end: 'center top',
        scrub: 1
      },
      x: 0,
      ease: 'none'
    });

    gsap.to('.section-label', {
      scrollTrigger: {
        trigger: '#about-hero',
        start: 'top top',
        end: 'bottom top',
        scrub: 1
      },
      y: -150,
      ease: 'none'
    });

    gsap.to('.hero-title, .penguin-container', {
      scrollTrigger: {
        trigger: '#about-hero',
        start: 'center center',
        end: 'bottom top',
        scrub: 1
      },
      opacity: 0,
      y: -50,
      ease: 'none'
    });
  }
</script>

<style>
  .star-float {
    animation: float 3s ease-in-out infinite;
  }

  .star-float-delay {
    animation: float 3s ease-in-out infinite;
    animation-delay: 1s;
  }

  @keyframes float {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-10px);
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .star-float,
    .star-float-delay {
      animation: none;
    }
  }
</style>
